---
title: "Windows: чиним баг с раскладками, появляющимися из ниоткуда"
description: Ещё до появления в моей жизни альтернативных раскладок клавиатуры, 11-й Виндовс умудрялся иногда включать мне лишние раскладки клавиатуры. Это случалось раз в месяц и решалось меньше чем за минуту, но в какой-то момент надоело. Я потратил 10 минут в Регистрах и теперь живу счастливо.
date: 2025-05-22
taglist:
  - техносреда
  - Раскладка для биологов
draft: false
starred: false
not-post: false
thumbnail: none
---
При установке Винды на мой ноутбук я сплоховал и случайно выбрал британскую раскладку вместо американской. Заметив ошибку, я удалил британскую раскладку и поставил американскую — и этим навлёк на себя проклятие.

С тех пор Винда раз в месяц стабильно подкладывала мне свинью и добавляла к моим двум нормальным раскладкам эту самую британскую. И я не мог просто удалить её в настройках — потому что в настройках она не появлялась.

В списке языков британского не было.
 {.window} Запомните кнопку Add a language.

Внутри English – United States тоже не было британской раскладки
![](win-layout-spawn-fix-3.png){.window} Извините, что испортил погружение скриншотом из будущего.

Поэтому для того, чтобы удалить британскую раскладку из меню, мне нужно было сначала её в меню добавить — через *Add a language › English (UK)* — и, не дожидаясь скачивания, сразу удалять. Небольшое неудобство, ритуал на 30 секунд.

Потом я узнал о [Типографской раскладке Ильи Бирмана](https://ilyabirman.ru/typography-layout/), установил её и удалил свои дефолтные русскую и англо-американскую. Раз вы читаете этот туториал, то уже на своём опыте поняли, что это разозлило богов Винды и они стали подкидывать эти раскладки вдовесок к британской — как будто напускали в мою систему призраки удалённых раскладок.

![](win-layout-spawn-fix-1.png) More keyboard settings, шорткат до настроек клавиатуры.

Умный человек уже сложил бы дважды два и пошёл бы искать недочищенные следы удалённых раскладок, но я дежурным движением открывал *More keyboard settings*, добавлял и удалял англо-британский язык, заходил во вкладку с русским языком, добавлял *Add a keyboard › Русский*, удалял, повторял с англо-американским языком. Небольшое неудобство, ритуал на минуту. 

И так три года. А потом погуглил [и нашёл решение](https://answers.microsoft.com/en-us/windows/forum/all/keyboard-layouts-from-languages-i-deleted-keep/ee3f114e-208e-41e5-bcd0-b033212c8029).

## Собственно, мануал

Brace yourself: нам придётся залезть в Регистры и провести там минимум пять минут.

1. Зажмите Win+R и введите в появившимся поле `regedit` — это откроет окно Registry Editor
![](win-layout-spawn-fix-4.png){.window}

2. Перейдите в папку `\HKEY_USERS\.DEFAULT\Control Panel\International\User Profile\` и удалите в языковых подпапках внутри неё все ненужные раскладки. Раскладка для биологов — нестандартная, поэтому начинается с `0409:А000...` вместо `0409:0000...` (а ещё имеет «имя» `@Winlangdb.dll`).
![](win-layout-spawn-fix-7.png){.window} Выберите Delete в выпадайке, а не как я. CachedLanguageName тоже можете удалить от греха подальше.

3. Заодно проверьте содержимое соседней папки `\International\User Profile System Backup\` — Винда подтягивает раскладки оттуда при бекапе. Следы моих удалённых раскладок жили там и мне пришлось изменить их на через Rename на имя соответствующей язык Раскладки для биологов (aka заменить `:0` на `:A`).
![](win-layout-spawn-fix-8.png)

4. Если у вас, как у меня, появляются раскладки на новых языках, вы можете удалять папки с ними целиком.
![](win-layout-spawn-fix-5.png){.window}

5. Наконец, зайдите в `\HKEY_USERS\.DEFAULT\Keyboard Layout\Preload\` (я знаю, вы хотели зайти туда с самого начала) и удалите все лишние раскладки. Раскладки для биологов здесь имеет значения, начинающееся с `d001` — вы можете удостовериться, что это они, зайдя в соседнюю папку `\Substitutes\`— там ключу `d001...` будет соответствовать уже знакомое нам `04*9:A...`
![](win-layout-spawn-fix-9.png){.window}

6. В идеале, помимо `\.DEFAULT` юзера, вам нужно сходить и вычистить лишние раскладки у всех других: `\S-1-5-18`, `\S-1-5-19`, etc. Но ПК не зря расшифровывается как *персональный* компьютер и я удивлюсь, если вы реально пользуетесь более, чем одним профилем. Так что конгратс, ю дид ит!

No more ghosts.